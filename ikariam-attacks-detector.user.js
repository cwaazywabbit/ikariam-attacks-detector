// ==UserScript==
// @name         Ikariam Attacks Detector
// @namespace    http://ikariam.ninja/
// @version      0.5
// @author       CwaazyWabbit
// @description  try to take over the world!
// @match        http*://*.ikariam.gameforge.com/*
// @require      https://greasyfork.org/scripts/3622-ikariam-developer-tools-v0-5-0/code/Ikariam Developer Tools V050+.user.js
// @require      https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js
// @require      https://raw.githubusercontent.com/mckamey/countdownjs/master/countdown.min.js
// @require      https://raw.githubusercontent.com/icambron/moment-countdown/master/dist/moment-countdown.min.js
// @require      https://raw.githubusercontent.com/kamranahmedse/jquery-toast-plugin/master/dist/jquery.toast.min.js
// @updateURL    https://github.com/cwaazywabbit/ikariam-attacks-detector/raw/master/ikariam-attacks-detector.user.js
// @downloadURL  https://github.com/cwaazywabbit/ikariam-attacks-detector/raw/master/ikariam-attacks-detector.user.js
// @resource     toastCss https://raw.githubusercontent.com/kamranahmedse/jquery-toast-plugin/master/dist/jquery.toast.min.css
// @grant        unsafeWindow
// @grant        GM_getResourceText
// @grant        GM_addStyle
// ==/UserScript==

eval(function(p,a,c,k,e,r){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)r[e(c)]=k[c]||e(c);k=[function(e){return r[e]}];e=function(){return'\\w+'};c=1};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}('7 I=\'2t\',2s=[],l=6(a,b){7 c=2q 2l(\'(\\\\d+)\'+b,\'g\').2k(a);Z(c?c[1]:0)},Q=6(){$.5().S(\'2j\')},U=6(a,b,c,e){7 f=2i(6(){a=4.j(a.1t()-b,\'1u\');7 d=4.j(a).2h(),h=4.j(a).P(),m=4.j(a).C(),s=4.j(a).F();d=$.z(d).y===1?\'0\'+d:d;h=$.z(h).y===1?\'0\'+h:h;m=$.z(m).y===1?\'0\'+m:m;s=$.z(s).y===1?\'0\'+s:s;$(\'#15\'+c).3((d*1?d+\'يوم \':\'\')+(h*1?h+\'سا \':\'\')+(m*1?m+\'د \':\'\')+(s*1?s+\'ثا\':\'\'));8(a.1t()===0){1g(f);e.S()}},b);Z f};(6(){\'2f 2e\';7 i=2d(\'2c\');1q(i);1q(\'.5-3 p { 2b: 2a; 3-K: 29 }\'+\'.q-5-k { 3-K: 25; }\'+\'.5-3 p, .q-5-k b, .5-3 a, .q-5-k a { V-24: 23,1y; V-21: 1Z; }\'+\'.5-3 p, .q-5-k b { 1X: 1V; }\'+\'.5-3 a { 3-1U: 1T; }\'+\'.q-5-k E { 1S-K: 1R; }\');t.19.1Q(6 1P(h){t.1O.1N(h,6 1J(d,e,f){8(f&&f.1f){I=f.1f}8(e==t.H.1e.1I){}1H 8(e==t.H.1e.1F){7 g=f[0];8(g==t.H.19.1E){Q();$(\'.1D\').1C(6(){7 a=$(1B),2=a.9(\'2\'),M=l(2,\'\'),1r=$(\'#\'+2+\'1A\').3(),N=$(\'#\'+2+\'22\').3(),o=$(\'#\'+2+\'1z\').3(),1x=$(\'#\'+2+\'1w\').9(\'O\'),1s=$(\'#\'+2+\'1w\').9(\'w\'),1n=$(\'#\'+2+\'1m\').9(\'O\'),1l=$(\'#\'+2+\'1m\').9(\'w\'),1k=$(\'#\'+2+\'1G\').9(\'O\'),1j=$(\'#\'+2+\'B\').G(\'1K\')||$(\'#\'+2+\'B\').G(\'1L\')||$(\'#\'+2+\'B\').G(\'1M\')?\'<E 1d="\'+1c.1b+\'//\'+1a.17+\'/16/14/13/D-1W.11" />\':\'<E 1d="\'+1c.1b+\'//\'+1a.17+\'/16/14/13/D-1Y.11" />\',10=$(\'#\'+2+\'20\').3();8(1r===\'(في رحلة)\'){7 b=l(o,\'يوم\'),P=l(o,\'ساعة\'),C=l(o,\'د\'),F=l(o,\'ثا\'),J=I,Y=4(4.X(J).r(b,\'n\').r(P,\'26\').r(C,\'27\').r(F,\'28\'),\'v-A-u 1p:1o:1i\'),1h=4(Y).2g(4(),\'n\'),1v=4(1h?4().12(\'n\').T(\'v-A-u\')+\' \'+N:4().12(\'n\').r(1,\'n\').T(\'v-A-u\')+\' \'+N,\'v-A-u 1p:1o:1i\').X(),L=1v-J;8(L>0){7 c=$.5({k:\'<b>\'+1j+\' رصدنا تحركًّا معاديًّا باتجاه <a w="\'+1l+\'">\'+1n+\'</a></b>\',3:\'<x 2m="5-3">\'+\'<p><b>الاشتباك خلال:</b> <x 2="15\'+M+\'"></x></p>\'+\'<p><b>المهاجم:</b> \'+1k+\' <b>من:</b> <a w="\'+1s+\'">\'+1x+\'</a></p>\'+\'<p><b>عدد الوحدات:</b> \'+10+\'</p>\'+\'</x>\',2n:2o,2p:W,D:\'2r\',}),18=U(4.j(L*R,\'1u\'),R,M,c);c.2u({2v:6(){1g(18)}})}}})}}})},W)})();',62,156,'||id|text|moment|toast|function|var|if|attr||||||||||duration|heading|matchPart||day|arrivesIn||jq|add||IkaTools|YYYY|DD|href|span|length|trim|MM|MissionIcon|minutes|icon|img|seconds|hasClass|Constants|serverTimestamp|currentTime|align|diffTime|uid|arrivalDate|title|hours|resetAllNotifications|1000|reset|format|createInterval|font|true|unix|estArrival|return|units|png|startOf|military|advisors|engageOn|skin|domain|intId|View|document|protocol|location|src|IkariamAjaxResponseType|time|clearInterval|isSameDay|ss|attackType|attacker|attackingCityLink|TargetLink|attackingCity|mm|HH|GM_addStyle|state|attackerCityLink|asMilliseconds|milliseconds|eventTime|OriginLink|attackerCity|Arial|ArrivalTime|State|this|each|hostile|MILITARY_ADVISOR|CHANGE_VIEW|OriginAvatar|else|UPDATE_GLOBAL_DATA|lookForChangeView|blockade|deployfleet|defend_port|iterateIkariamAjaxResponse|Utils|handlejaxResponse|registerIkariamAjaxResponseCallback|middle|vertical|none|decoration|rtl|seafight|direction|groundfight|10px|Units|size|ArrivalDate|Tahoma|family|center|hour|minute|second|right|white|color|toastCss|GM_getResourceText|strict|use|isSame|days|setInterval|all|exec|RegExp|class|hideAfter|false|allowToastClose|new|error|intervals|undefined|update|afterHidden'.split('|'),0,{}))
